#title 
  %h1 Contrasaurus

#game_container
  #game_info
    %span#health_label health
    #progress_bar
      #health
    #score_holder
      %span#score_label score
      %span#score 0
  %canvas#gameCanvas{:width => 640, :height => 480}
    %p 
      HTML5 canvas not supported by your browser.
      = link "Learn more here", "http://www.google.com/chrome"
    #tilt
#menu_container
  - %w[battleAxe bazooka bite bomb chainsaw flamethrower laserGun machineGun meat shield shotgun].each do |weapon|
    .menu{"data-weaponClass" => weapon}
      = img "menu/#{weapon}.png"

= javascripts('contrasaurus/main')

- levels = %w[prehistoric area51 boat jungle washington_dc].map {|name| "contrasaurus/levels/#{name}" }
= javascripts(*levels)

:javascript
  $('#gameCanvas').powerCanvas({init: function(_canvas) {

    canvas = _canvas;
    canvas.font("bold 1em consolas, 'Courier New', 'andale mono', 'lucida console', monospace");

    canvas.fillColor("black");
    canvas.fillText("LOADING...", 280, 240);

    var loadChecker = setInterval(function() {
      var status = AssetTracker.count();

      // Added some fudge, it looks like it's not triggering the load tracking
      // on two assets
      if(status[0] >= status[1] - 2) {
        clearInterval(loadChecker);
        nextStage();
      }
    }, 1000);
  }});
